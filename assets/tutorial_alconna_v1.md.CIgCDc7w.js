import{_ as i,o as a,c as n,aa as l}from"./chunks/framework.DCts17Kx.js";const B=JSON.parse('{"title":"Alconna","description":"","frontmatter":{"next":"Alconna 2.0"},"headers":[],"relativePath":"tutorial/alconna/v1.md","filePath":"tutorial/alconna/v1.md","lastUpdated":1753501994000}'),t={name:"tutorial/alconna/v1.md"};function p(h,s,e,k,r,d){return a(),n("div",null,s[0]||(s[0]=[l(`<h1 id="alconna" tabindex="-1">Alconna <a class="header-anchor" href="#alconna" aria-label="Permalink to &quot;Alconna&quot;">​</a></h1><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>该教程是对整个 Alconna 特性的大致归纳，以帮助读者熟悉 Alconna 的使用与开发。</p><p>有关更多详细内容，请参阅 文档(/guide/alconna)</p></div><p><a href="https://github.com/ArcletProject/Alconna" target="_blank" rel="noreferrer"><code>Alconna</code></a> 是 <code>Arclet Project</code> 下负责命令参数解析的模块，是 <code>Arclet</code> 的核心模块之一。</p><p>我们通过一个例子来讲解 <strong>Alconna</strong> 的核心 —— <code>Args</code>, <code>Subcommand</code>, <code>Option</code>：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Subcommand</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Option</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">    &quot;pip&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">    Subcommand</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">        &quot;install&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">        Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;package&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;-r|--requirement&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;file&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">        Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;-i|--index-url&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;url&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]),</span></span>
<span class="line"><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">    )</span></span>
<span class="line"><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">res </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;pip install arclet-entari -i URL&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#56B6C2;">print</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(res)</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># matched=True, header_match=(origin=&#39;pip&#39; result=&#39;pip&#39; matched=True groups={}), subcommands={&#39;install&#39;: (value=Ellipsis args={&#39;package&#39;: &#39;arclet-entari&#39;} options={&#39;index-url&#39;: (value=None args={&#39;url&#39;: &#39;URL&#39;})} subcommands={})}, other_args={&#39;package&#39;: &#39;nonebot2&#39;, &#39;url&#39;: &#39;URL&#39;}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#56B6C2;">print</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(res.all_matched_args)</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># {&#39;package&#39;: &#39;arclet-entari&#39;, &#39;url&#39;: &#39;URL&#39;}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><details class="details custom-block"><summary>解释</summary><p>这段代码通过 <code>Alconna </code> 创建了一个接受主命令名为 <code>pip</code>, 子命令为 <code>install</code> 且子命令接受一个 <strong>Args</strong> 参数package和二个 <strong>Option</strong> 参数<code>requirement</code>和<code>index-url</code>的命令参数解析器, 通过parse方法返回解析结果 <strong>Arparma</strong> 的实例。</p></details><p>其特点有:</p><ul><li>高效</li><li>直观的命令组件创建方式，例如选项别名，默认值，解析操作等</li><li>强大的类型解析与类型转换功能，具体在 <code>Args</code> 的使用上</li><li>自定义的帮助信息格式，帮助信息由内置选项 <code>help</code> 触发，用户可以选择自定义的 TextFormatter 获得不一样的输出格式</li><li>多语言支持，目前支持中文与英文</li><li>易用的快捷命令创建与使用，可由内置选项 <code>shortcut</code> 触发，或使用 <code>Alconna.shortcut()</code> 方法</li><li>可创建命令补全会话, 以实现多轮连续的补全提示</li><li>可通过 <code>Namespace</code>，<code>CommandMeta</code> 配置命令的行为与属性，例如通过 <code>Namespace</code> 自定义内置选项的触发字段，或通过 <code>CommandMeta</code> 启用模糊匹配</li><li>可嵌套的多级子命令</li><li><code>Duplication</code> 能像 <code>argparse.Namespace</code> 一样获取指定的解析结果并获得类型支持</li><li>正则匹配支持</li><li>...</li></ul><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-rRR0J" id="tab-nT9KmeK" checked><label data-title="pdm" for="tab-nT9KmeK">pdm</label><input type="radio" name="group-rRR0J" id="tab-piUukq4"><label data-title="poetry" for="tab-piUukq4">poetry</label><input type="radio" name="group-rRR0J" id="tab-SYXjVSN"><label data-title="pip" for="tab-SYXjVSN">pip</label></div><div class="blocks"><div class="language-bash vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">pdm</span><span style="--shiki-light:#2B5581;--shiki-dark:#98C379;"> add</span><span style="--shiki-light:#2B5581;--shiki-dark:#98C379;"> arclet-alconna</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">poetry</span><span style="--shiki-light:#2B5581;--shiki-dark:#98C379;"> add</span><span style="--shiki-light:#2B5581;--shiki-dark:#98C379;"> arclet-alconna</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">pip</span><span style="--shiki-light:#2B5581;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#2B5581;--shiki-dark:#D19A66;"> --upgrade</span><span style="--shiki-light:#2B5581;--shiki-dark:#98C379;"> arclet-alconna</span></span></code></pre></div></div></div><h2 id="参数声明-args" tabindex="-1">参数声明(Args) <a class="header-anchor" href="#参数声明-args" aria-label="Permalink to &quot;参数声明(Args)&quot;">​</a></h2><p><strong>Args</strong> 是用于声明命令参数的组件, 在 Alconna 中有非常重要的地位，甚至称得上是核心，比 Alconna 重要十倍甚至九倍。</p><p><strong>Args</strong> 可以通过以下几种方式构造：</p><ul><li><code>Args[key, var, default][key1, var1, default1][...]</code></li><li><code>Args[(key, var, default)]</code></li><li><code>Args.key[var, default]</code></li></ul><p>其中，key <strong>一定</strong>是字符串，而 var 一般为参数的类型，default 为具体的值或者 <code>arclet.alconna.args.Field</code>。</p><p>其与函数签名类似，但是允许含有默认值的参数在前；同时支持 keyword-only 参数不依照构造顺序传入 （但是仍需要在非 keyword-only 参数之后）。</p><h3 id="参数名-key" tabindex="-1">参数名(key) <a class="header-anchor" href="#参数名-key" aria-label="Permalink to &quot;参数名(key)&quot;">​</a></h3><p><code>key</code> 的作用是用以标记解析出来的参数并存放于 <strong>Arparma</strong> 中，以方便用户调用。</p><p>其有三种为 Args 注解的标识符，为 <code>?</code>、<code>/</code> 与 <code>!</code>。标识符与 name 之间建议以 <code>;</code> 分隔：</p><ul><li><code>!</code> 标识符表示该处传入的参数应<strong>不是</strong>规定的类型，或<strong>不在</strong>指定的值中。</li><li><code>?</code> 标识符表示该参数为<strong>可选参数</strong>，会在无参数匹配时<strong>跳过</strong>。</li><li><code>/</code> 标识符表示该参数的类型注解需要<strong>隐藏</strong>。</li></ul><p>另外，对于参数的注释也可以标记在 <code>key</code> 中，其与 key 或者标识符 以 <code>#</code> 分割：<code>foo#这是注释;?</code> 或 <code>foo?#这是注释</code></p><div class="info custom-block"><p class="custom-block-title">INFO</p><p><code>Args</code> 中的 <code>key</code> 在实际命令中并不需要传入（keyword 参数除外）：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test --foo abc&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 错误</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test abc&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 正确</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>若需要 <code>test --foo abc</code>，你应该使用 <code>Option</code>：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Option</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;--foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><h3 id="参数值-var" tabindex="-1">参数值(var) <a class="header-anchor" href="#参数值-var" aria-label="Permalink to &quot;参数值(var)&quot;">​</a></h3><p>var 负责命令参数的<strong>类型检查与类型转化</strong></p><p><code>Args</code> 的<code>var</code>表面上看需要传入一个 <code>type</code>，但实际上它需要的是一个 <code>nepattern.BasePattern</code> 的实例：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> nepattern </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> BasePattern</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 表示 foo 参数需要匹配一个 @number 样式的字符串</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">args </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> BasePattern</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;@\\d+&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>pip</code> 示例中可以传入 <code>str</code> 是因为 <code>str</code> 已经注册在了 <code>nepattern.global_patterns</code> 中，因此会替换为 <code>nepattern.global_patterns[str]</code></p><p><code>nepattern.global_patterns</code>默认支持的类型有：</p><ul><li><code>str</code>: 匹配任意字符串</li><li><code>int</code>: 匹配整数</li><li><code>float</code>: 匹配浮点数</li><li><code>bool</code>: 匹配 <code>True</code> 与 <code>False</code> 以及他们小写形式</li><li><code>hex</code>: 匹配 <code>0x</code> 开头的十六进制字符串</li><li><code>url</code>: 匹配网址</li><li><code>email</code>: 匹配 <code>xxxx@xxx</code> 的字符串</li><li><code>ipv4</code>: 匹配 <code>xxx.xxx.xxx.xxx</code> 的字符串</li><li><code>list</code>: 匹配类似 <code>[&quot;foo&quot;,&quot;bar&quot;,&quot;baz&quot;]</code> 的字符串</li><li><code>dict</code>: 匹配类似 <code>{&quot;foo&quot;:&quot;bar&quot;,&quot;baz&quot;:&quot;qux&quot;}</code> 的字符串</li><li><code>datetime</code>: 传入一个 <code>datetime</code> 支持的格式字符串，或时间戳</li><li><code>Any</code>: 匹配任意类型</li><li><code>AnyString</code>: 匹配任意类型，转为 <code>str</code></li><li><code>Number</code>: 匹配 <code>int</code> 与 <code>float</code>，转为 <code>int</code></li></ul><p>同时可以使用 typing 中的类型：</p><ul><li><code>Literal[X]</code>: 匹配其中的任意一个值</li><li><code>Union[X, Y]</code>: 匹配其中的任意一个类型</li><li><code>Optional[xxx]</code>: 会自动将默认值设为 <code>None</code>，并在解析失败时使用默认值</li><li><code>List[X]</code>: 匹配一个列表，其中的元素为 <code>X</code> 类型</li><li><code>Dict[X, Y]</code>: 匹配一个字典，其中的 key 为 <code>X</code> 类型，value 为 <code>Y</code> 类型</li><li>...</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>几类特殊的传入标记：</p><ul><li><code>&quot;foo&quot;</code>: 匹配字符串 &quot;foo&quot; (若没有某个 <code>BasePattern</code> 与之关联)</li><li><code>RawStr(&quot;foo&quot;)</code>: 匹配字符串 &quot;foo&quot; (即使有 <code>BasePattern</code> 与之关联也不会被替换)</li><li><code>&quot;foo|bar|baz&quot;</code>: 匹配 &quot;foo&quot; 或 &quot;bar&quot; 或 &quot;baz&quot;</li><li><code>[foo, bar, Baz, ...]</code>: 匹配其中的任意一个值或类型</li><li><code>Callable[[X], Y]</code>: 匹配一个参数为 <code>X</code> 类型的值，并返回通过该函数调用得到的 <code>Y</code> 类型的值</li><li><code>&quot;re:xxx&quot;</code>: 匹配一个正则表达式 <code>xxx</code>，会返回 Match[0]</li><li><code>&quot;rep:xxx&quot;</code>: 匹配一个正则表达式 <code>xxx</code>，会返回 <code>re.Match</code> 对象</li><li><code>{foo: bar, baz: qux}</code>: 匹配字典中的任意一个键, 并返回对应的值 (特殊的键 ... 会匹配任意的值)</li><li>...</li></ul><p><strong>特别的</strong>，你可以不传入 <code>var</code>，此时会使用 <code>key</code> 作为 <code>var</code>, 匹配 <code>key</code> 字符串。</p></div><h4 id="multivar-与-keywordvar" tabindex="-1">MultiVar 与 KeyWordVar <a class="header-anchor" href="#multivar-与-keywordvar" aria-label="Permalink to &quot;MultiVar 与 KeyWordVar&quot;">​</a></h4><p><code>MultiVar</code> 是一个特殊的标注，用于告知解析器该参数可以接受多个值，类似于函数中的 <code>*args</code>，其构造方法形如 <code>MultiVar(str)</code>。其返回值为一个元组，包含了所有匹配到的值。</p><p>同样的还有 <code>KeyWordVar</code>，类似于函数中的 <code>*, name: type</code>，其构造方法形如 <code>KeyWordVar(str)</code>，用于告知解析器该参数为一个 keyword-only 参数。</p><p><code>MultiVar</code> 与 <code>KeyWordVar</code> 组合时，代表该参数为一个可接受多个 key-value 的参数，类似于函数中的 <code>**kwargs</code>，其构造方法形如 <code>MultiVar(KeyWordVar(str))</code>。其返回值为一个字典，包含了所有匹配到的键值对。</p><p><code>MultiVar</code> 与 <code>KeyWordVar</code> 也可以传入 <code>default</code> 参数，用于指定默认值</p><p><code>MultiVar</code> 不能在 <code>KeyWordVar</code> 之后传入</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-3ZC1A" id="tab-nZ-yl7J" checked><label data-title="MultiVar" for="tab-nZ-yl7J">MultiVar</label><input type="radio" name="group-3ZC1A" id="tab-3qWFqKq"><label data-title="MultiVar(KeyWordVar)" for="tab-3qWFqKq">MultiVar(KeyWordVar)</label></div><div class="blocks"><div class="language-python vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> MultiVar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">MultiVar</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">res </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test 123 456 789&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#56B6C2;">print</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">))</span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # (&#39;123&#39;, &#39;456&#39;, &#39;789&#39;)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> MultiVar</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> KeyWordVar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">MultiVar</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">KeyWordVar</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">))])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">res </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test 123=456 789=abc&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#56B6C2;">print</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">))</span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # {&#39;123&#39;: &#39;456&#39;, &#39;789&#39;: &#39;abc&#39;}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div><h4 id="strmulti" tabindex="-1">StrMulti <a class="header-anchor" href="#strmulti" aria-label="Permalink to &quot;StrMulti&quot;">​</a></h4><p><code>StrMulti</code> 是一个特殊的 <code>BasePattern</code>。</p><p>其基于 <code>MultiVar(str)</code>, 用于匹配多个字符串参数，并返回拼接后的字符串。</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> StrMulti</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, StrMulti])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">res </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test 123 456 789&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#56B6C2;">print</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">))</span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # &#39;123 456 789&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="泛匹配" tabindex="-1">泛匹配 <a class="header-anchor" href="#泛匹配" aria-label="Permalink to &quot;泛匹配&quot;">​</a></h4><p><code>Args</code> 通过设置 <code>var</code> 为 <code>AllParam</code> 来实现泛匹配。</p><p><code>AllParam</code> 是一个特殊的 <code>BasePattern</code>，从 <code>arclet.alconna.typing</code> 中导入。</p><p>当命令解析进行到 <code>AllParam</code> 时，传入命令的<strong>后续所有数据都会被匹配到该参数上</strong>。</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-NP1wg" id="tab-c5ex8Ae" checked><label data-title="直接使用" for="tab-c5ex8Ae">直接使用</label><input type="radio" name="group-NP1wg" id="tab-LuHflog"><label data-title="配置类型" for="tab-LuHflog">配置类型</label></div><div class="blocks"><div class="language-python vp-adaptive-theme active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> AllParam</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, AllParam])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">res </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test 123 456 789&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#56B6C2;">print</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">))</span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # [&#39;123&#39;, &#39;456&#39;, &#39;789&#39;]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> AllParam</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">AllParam</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">res </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">([</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;123&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;456&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#D19A66;">789</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#56B6C2;">print</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(res.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">))</span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # [&#39;123&#39;, &#39;456&#39;]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div><p>可以注意到，<code>AllParam</code> 的返回值是一个列表，包含了所有匹配到的值。</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>返回值的类型与 <code>Argv.converter</code> 有关，默认处理为列表。而在其他场景继承并修改了 <code>Argv</code> 的情况下，返回值可能会有所不同。</p></div><h3 id="参数单元-arg" tabindex="-1">参数单元(Arg) <a class="header-anchor" href="#参数单元-arg" aria-label="Permalink to &quot;参数单元(Arg)&quot;">​</a></h3><p><strong>Arg</strong> 是 <strong>Args</strong> 的最小单位：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">Args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Arg</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(k1, v1),</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Arg</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(k2, v2),</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D19A66;"> ...</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Arg</strong> 初始化时可以传入：</p><ul><li>name: 参数名</li><li>value: 参数类型</li><li>field: 参数域</li><li>seps: 参数分隔符</li><li>notice: 参数注释</li><li>flags: 参数标识符</li></ul><p><strong>Arg</strong> 可以通过传入 <code>seps</code> 指定该参数如何与后续数据区分，也可通过 <strong>Args</strong> 的 <code>separators</code> 参数统一设置</p><h3 id="参数域-default-field" tabindex="-1">参数域(default/Field) <a class="header-anchor" href="#参数域-default-field" aria-label="Permalink to &quot;参数域(default/Field)&quot;">​</a></h3><p><code>default</code> 传入的是该参数的默认值或者 <code>Field</code>，以携带对于该参数的更多信息。</p><p>默认情况下 (即不声明) <code>default</code> 的值为特殊值 <code>Empty</code>。这也意味着你可以将默认值设置为 <code>None</code> 表示默认值为空值。</p><p><code>Field</code> 构造需要的参数说明如下：</p><ul><li>default: 参数单元的默认值</li><li>alias: 参数单元默认值的别名</li><li>completion: 参数单元的补全说明生成函数</li><li>unmatch_tips: 参数单元的错误提示生成函数，其接收一个表示匹配失败的元素的参数</li><li>missing_tips: 参数单元的缺失提示生成函数</li></ul><h2 id="选项与子命令-option-subcommand" tabindex="-1">选项与子命令(Option &amp; Subcommand) <a class="header-anchor" href="#选项与子命令-option-subcommand" aria-label="Permalink to &quot;选项与子命令(Option &amp; Subcommand)&quot;">​</a></h2><p><strong>Option</strong> 与 <strong>Subcommand</strong> 是 Alconna 中的两个重要组件。</p><p><code>Option</code> 和 <code>Subcommand</code> 可以传入一组 <code>alias</code>，</p><p>如 <code>Option(&quot;--foo|-F|--FOO|-f&quot;)</code>，<code>Subcommand(&quot;foo&quot;, alias=[&quot;F&quot;])</code></p><p>传入别名后，选项与子命令会选择其中长度最长的作为其名称。若传入为 &quot;--foo|-f&quot;，则命令名称为 &quot;--foo&quot;</p><div class="tip custom-block"><p class="custom-block-title">特别提醒!!!</p><p>Option 的名字或别名<strong>没有要求</strong>必须在前面写上 <code>-</code></p><p>Option 与 Subcommand 的唯一区别在于 Subcommand 可以传入自己的 <strong>Option</strong> 与 <strong>Subcommand</strong></p></div><p>他们拥有如下共同参数：</p><ul><li><p><code>help_text</code>: 传入该组件的帮助信息</p></li><li><p><code>dest</code>: 被指定为解析完成时标注匹配结果的标识符，不传入时默认为选项或子命令的名称 (name)</p></li><li><p><code>requires</code>: 一段指定顺序的字符串列表，作为唯一的前置序列与命令嵌套替换</p><p>对于命令 <code>test foo bar baz qux &lt;a:int&gt;</code> 来讲，因为<code>foo bar baz</code> 仅需要判断是否相等, 所以可以这么编写：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;qux&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args.a[</span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">int</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">], </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">requires</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;bar&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;baz&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><code>default</code>: 默认值，在该组件未被解析时使用使用该值替换。</p><p>特别的，使用 <code>OptionResult</code> 或 <code>SubcomanndResult</code> 可以设置包括参数字典在内的默认值：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> OptionResult</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">opt1 </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;--foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">default</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#D19A66;">False</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">opt2 </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;--foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">default</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">OptionResult</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">value</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#D19A66;">False</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">{</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;bar&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#1976D2;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">}))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul><h3 id="选项操作-action" tabindex="-1">选项操作(Action) <a class="header-anchor" href="#选项操作-action" aria-label="Permalink to &quot;选项操作(Action)&quot;">​</a></h3><p><code>Option</code> 可以特别设置传入一类 <code>Action</code>，作为解析操作</p><p><code>Action</code> 分为三类：</p><ul><li><p><code>store</code>: 无 Args 时， 仅存储一个值， 默认为 Ellipsis； 有 Args 时， 后续的解析结果会覆盖之前的值</p></li><li><p><code>append</code>: 无 Args 时， 将多个值存为列表， 默认为 Ellipsis； 有 Args 时， 每个解析结果会追加到列表中</p><p>当存在默认值并且不为列表时， 会自动将默认值变成列表， 以保证追加的正确性</p></li><li><p><code>count</code>: 无 Args 时， 计数器加一； 有 Args 时， 表现与 STORE 相同</p><p>当存在默认值并且不为数字时， 会自动将默认值变成 1， 以保证计数器的正确性。</p></li></ul><p><code>Alconna</code> 提供了预制的几类 <code>action</code>：</p><ul><li><code>store</code>，<code>store_value</code>，<code>store_true</code>，<code>store_false</code></li><li><code>append</code>，<code>append_value</code></li><li><code>count</code></li></ul><h2 id="解析结果-arparma" tabindex="-1">解析结果(Arparma) <a class="header-anchor" href="#解析结果-arparma" aria-label="Permalink to &quot;解析结果(Arparma)&quot;">​</a></h2><p><code>Alconna.parse</code> 会返回由 <strong>Arparma</strong> 承载的解析结果。</p><p><code>Arpamar</code> 会有如下参数：</p><ul><li><p>调试类</p><ul><li>matched: 是否匹配成功</li><li>error_data: 解析失败时剩余的数据</li><li>error_info: 解析失败时的异常内容</li><li>origin: 原始命令，可以类型标注</li></ul></li><li><p>分析类</p><ul><li><p>header_match: 命令头部的解析结果，包括原始头部、解析后头部、解析结果与可能的正则匹配组</p></li><li><p>main_args: 命令的主参数的解析结果</p></li><li><p>options: 命令所有选项的解析结果</p></li><li><p>subcommands: 命令所有子命令的解析结果</p></li><li><p>other_args: 除主参数外的其他解析结果</p></li><li><p>all_matched_args: 所有 Args 的解析结果</p></li></ul></li></ul><p><code>Arparma</code> 同时提供了便捷的查询方法 <code>query[T]()</code>，会根据传入的 <code>path</code> 查找参数并返回</p><p><code>path</code> 支持如下：</p><ul><li><code>main_args</code>, <code>options</code>, ...: 返回对应的属性</li><li><code>args</code>: 返回 all_matched_args</li><li><code>main_args.xxx</code>, <code>options.xxx</code>, ...: 返回字典中 <code>xxx</code>键对应的值</li><li><code>args.xxx</code>: 返回 all_matched_args 中 <code>xxx</code>键对应的值</li><li><code>options.foo</code>, <code>foo</code>: 返回选项 <code>foo</code> 的解析结果 (OptionResult)</li><li><code>options.foo.value</code>, <code>foo.value</code>: 返回选项 <code>foo</code> 的解析值</li><li><code>options.foo.args</code>, <code>foo.args</code>: 返回选项 <code>foo</code> 的解析参数字典</li><li><code>options.foo.args.bar</code>, <code>foo.bar</code>: 返回选项 <code>foo</code> 的参数字典中 <code>bar</code> 键对应的值 ...</li></ul><p>同样, <code>Arparma[&quot;foo.bar&quot;]</code> 的表现与 <code>query()</code> 一致</p><h2 id="元数据-commandmeta" tabindex="-1">元数据(CommandMeta) <a class="header-anchor" href="#元数据-commandmeta" aria-label="Permalink to &quot;元数据(CommandMeta)&quot;">​</a></h2><p><code>Alconna</code> 的元数据相当于其配置，拥有以下条目：</p><ul><li><code>description</code>: 命令的描述</li><li><code>usage</code>: 命令的用法</li><li><code>example</code>: 命令的使用样例</li><li><code>author</code>: 命令的作者</li><li><code>fuzzy_match</code>: 命令是否开启模糊匹配</li><li><code>fuzzy_threshold</code>: 模糊匹配阈值</li><li><code>raise_exception</code>: 命令是否抛出异常</li><li><code>hide</code>: 命令是否对 manager 隐藏</li><li><code>hide_shortcut</code>: 命令的快捷指令是否在 help 信息中隐藏</li><li><code>keep_crlf</code>: 命令解析时是否保留换行字符</li><li><code>compact</code>: 命令是否允许第一个参数紧随头部</li><li><code>strict</code>: 命令是否严格匹配，若为 False 则未知参数将作为名为 $extra 的参数</li><li><code>context_style</code>: 命令上下文插值的风格，None 为关闭，bracket 为 <code>{...}</code>，parentheses 为 <code>$(...)</code></li><li><code>extra</code>: 命令的自定义额外信息</li></ul><p>元数据一定使用 <code>meta=...</code> 形式传入：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> CommandMeta</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#212121;--shiki-dark:#D19A66;">...</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">meta</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">CommandMeta</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">example</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;bar&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="紧凑命令" tabindex="-1">紧凑命令 <a class="header-anchor" href="#紧凑命令" aria-label="Permalink to &quot;紧凑命令&quot;">​</a></h2><p><code>Alconna</code>, <code>Option</code> 可以设置 <code>compact=True</code> 使得解析命令时允许名称与后随参数之间没有分隔：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> CommandMeta</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">int</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">], </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;BAR&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;baz&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">], </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">compact</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">), </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">meta</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">CommandMeta</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">compact</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">assert</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test123 BARabc&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">matched</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这使得我们可以实现如下命令：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> append</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;gcc&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;--flag|-F&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;content&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">], </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">action</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">append))</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;gcc -Fabc -Fdef -Fxyz&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;flag.content&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&#39;abc&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;"> &#39;def&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;"> &#39;xyz&#39;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>当 <code>Option</code> 的 <code>action</code> 为 <code>count</code> 时，其自动支持 <code>compact</code> 特性：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;"> from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> count</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;pp&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;--verbose|-v&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">action</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">count, </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">default</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;pp -vvv&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;verbose.value&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#1976D2;--shiki-dark:#D19A66;">3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="帮助信息" tabindex="-1">帮助信息 <a class="header-anchor" href="#帮助信息" aria-label="Permalink to &quot;帮助信息&quot;">​</a></h2><p>每个 Alconna 命令 都可以通过 <code>--help</code> 或 <code>-h</code> 触发命令的帮助信息，并且可以通过继承 <code>arclet.alconna.formatter.TextFormatter</code> 来个性化信息样式，如：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> CommandMeta</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">tools </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> MarkdownTextFormatter</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;count#这是一个注释&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">int</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">], </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">formatter_type</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">MarkdownTextFormatter, </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">meta</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">CommandMeta</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">description</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;Hello World&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test --help&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><details class="details custom-block"><summary>输出:</summary><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>## Hello World</span></span>
<span class="line"><span></span></span>
<span class="line"><span>指令:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>**test &amp;lt;count:int&amp;gt;**</span></span>
<span class="line"><span>### 注释:</span></span>
<span class="line"><span>&amp;#96;&amp;#96;&amp;#96;</span></span>
<span class="line"><span>count: 这是一个注释</span></span>
<span class="line"><span>&amp;#96;&amp;#96;&amp;#96;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></details><p>除此之外，你可以通过 <code>command_manager</code> 获取当前程序下的所有命令：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> command_manager</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#56B6C2;">print</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(command_manager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">all_command_help</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><details class="details custom-block"><summary>输出:</summary><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span># 当前可用的命令有:</span></span>
<span class="line"><span> - foo : Unknown</span></span>
<span class="line"><span> - bar : Unknown</span></span>
<span class="line"><span> - baz : Unknown</span></span>
<span class="line"><span> - qux : Unknown</span></span>
<span class="line"><span># 输入&#39;命令名 --help&#39; 查看特定命令的语法</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></details><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Alconna 可以设置 <code>meta.hide</code> 参数以不被 command_manager 打印出来。</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> CommandMeta</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> command_manager</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">foo </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">meta</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">CommandMeta</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">hide</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#56B6C2;">print</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(command_manager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">all_command_help</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">())</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><details class="details custom-block"><summary>输出:</summary><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span># 当前可用的命令有:</span></span>
<span class="line"><span> - bar : Unknown</span></span>
<span class="line"><span> - baz : Unknown</span></span>
<span class="line"><span> - qux : Unknown</span></span>
<span class="line"><span># 输入&#39;命令名 --help&#39; 查看特定命令的语法</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></details></div><h2 id="命名空间配置" tabindex="-1">命名空间配置 <a class="header-anchor" href="#命名空间配置" aria-label="Permalink to &quot;命名空间配置&quot;">​</a></h2><p>命名空间配置 （以下简称命名空间） 相当于 <code>Alconna</code> 的默认配置，其优先度低于 <code>CommandMeta</code>。</p><p><code>Alconna</code> 默认使用 &quot;Alconna&quot; 命名空间。</p><p>命名空间有以下几个属性：</p><ul><li>name: 命名空间名称</li><li>prefixes: 默认前缀配置</li><li>separators: 默认分隔符配置</li><li>formatter_type: 默认格式化器类型</li><li>fuzzy_match: 默认是否开启模糊匹配</li><li>raise_exception: 默认是否抛出异常</li><li>builtin_option_name: 默认的内置选项名称(--help, --shortcut, --comp)</li><li>disable_builtin_options: 默认禁用的内置选项(--help, --shortcut, --comp)</li><li>enable_message_cache: 默认是否启用消息缓存</li><li>compact: 默认是否开启紧凑模式</li><li>strict: 命令是否严格匹配</li><li>context_style: 命令上下文插值的风格</li><li>...</li></ul><h3 id="新建命名空间并替换" tabindex="-1">新建命名空间并替换 <a class="header-anchor" href="#新建命名空间并替换" aria-label="Permalink to &quot;新建命名空间并替换&quot;">​</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> namespace</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Namespace</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Subcommand</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> config</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">ns </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Namespace</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">prefixes</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;/&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">])</span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 创建 &quot;foo&quot;命名空间配置, 它要求创建的Alconna的主命令前缀必须是/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;pip&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Subcommand</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;install&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;package&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]), </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">namespace</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">ns)</span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 在创建Alconna时候传入命名空间以替换默认命名空间</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 可以通过with方式创建命名空间</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">with</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> namespace</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;bar&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;"> as</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> np1</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">    np1</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">prefixes </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;!&quot;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">]    </span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 以上下文管理器方式配置命名空间，此时配置会自动注入上下文内创建的命令</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">    np1</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">formatter_type </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> ShellTextFormatter  </span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 设置此命名空间下的命令的 formatter 默认为 ShellTextFormatter</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">    np1</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">builtin_option_name</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;help&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;帮助&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;"> &quot;-h&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">}</span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 设置此命名空间下的命令的帮助选项名称</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 你还可以使用config来管理所有命名空间并切换至任意命名空间</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">config</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">namespaces</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> ns  </span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 将命名空间挂载到 config 上</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;pip&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">Subcommand</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;install&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;package&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]), </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">namespace</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">config.namespaces[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">])</span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 也是同样可以切换到&quot;foo&quot;命名空间</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="修改默认的命名空间" tabindex="-1">修改默认的命名空间 <a class="header-anchor" href="#修改默认的命名空间" aria-label="Permalink to &quot;修改默认的命名空间&quot;">​</a></h3><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> config</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> namespace</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Namespace</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">config</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">default_namespace</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">prefixes </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D19A66;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">]  </span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 直接修改默认配置</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">np </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Namespace</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;xxx&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">prefixes</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#212121;--shiki-dark:#D19A66;">...</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">config</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">default_namespace </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> np  </span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 更换默认的命名空间</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">with</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> namespace</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(config.default_namespace.name)</span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;"> as</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> np</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">    np</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">prefixes </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> [</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D19A66;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="快捷指令" tabindex="-1">快捷指令 <a class="header-anchor" href="#快捷指令" aria-label="Permalink to &quot;快捷指令&quot;">​</a></h2><p>快捷指令顾名思义，可以为基础指令创建便捷的触发方式, 并且传递参数给原命令</p><p>一般情况下你可以通过 <code>Alconna.shortcut</code> 进行快捷指令操作 (创建，删除).</p><p><code>shortcut</code> 的第一个参数为快捷指令名称，第二个参数为 <code>ShortcutArgs</code>，作为快捷指令的配置</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> ShortcutArgs</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;">TypedDict</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#98C379;">    &quot;&quot;&quot;快捷指令参数&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">    command</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> NotRequired</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#98C379;">    &quot;&quot;&quot;快捷指令的命令&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">    args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> NotRequired</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">list</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">Any</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]]</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#98C379;">    &quot;&quot;&quot;快捷指令的附带参数&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">    fuzzy</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> NotRequired</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">bool</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#98C379;">    &quot;&quot;&quot;是否允许命令后随参数&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">    prefix</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> NotRequired</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">bool</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#98C379;">    &quot;&quot;&quot;是否调用时保留指令前缀&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">    wrapper</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> NotRequired</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">ShortcutRegWrapper</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#98C379;">    &quot;&quot;&quot;快捷指令的正则匹配结果的额外处理函数&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">    humanized</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> NotRequired</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-dark:#98C379;">    &quot;&quot;&quot;快捷指令的人类可读描述&quot;&quot;&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>当 <code>fuzzy</code> 为 False 时，传入 <code>&quot;涩图1张 abc&quot;</code> 之类的快捷指令将视为解析失败</p><p>快捷指令允许三类特殊的 placeholder:</p><ul><li><p><code>{%X}</code>: 只用于 <code>command</code>, 如 <code>setu {%0}</code>，表示此处填入快截指令后随的第 X 个参数。</p><p>例如，若快捷指令为 <code>涩图</code>, 配置为 <code>{&quot;command&quot;: &quot;setu {%0}&quot;}</code>, 则指令 <code>涩图 1</code> 相当于 <code>setu 1</code></p></li><li><p><code>{*}</code>: 只用于 <code>command</code>, 表示此处填入所有后随参数，并且可以通过 <code>{*X}</code> 的方式指定组合参数之间的分隔符。</p></li><li><p><code>{X}</code>: 用于 <code>command</code> 与 <code>args</code>， 表示此处填入可能的正则匹配的组：</p><ul><li>若 <code>command</code> 中存在匹配组 <code>(xxx)</code>，则 <code>{X}</code> 表示第 X 个匹配组的内容</li><li>若 <code>command</code> 中存储匹配组 <code>(?P&lt;xxx&gt;...)</code>, 则 <code>{X}</code> 表示名字为 X 的匹配结果</li></ul></li></ul><p>除此之外, 通过内置选项 <code>--shortcut</code> 可以动态操作快捷指令。</p><h3 id="示例" tabindex="-1">示例 <a class="header-anchor" href="#示例" aria-label="Permalink to &quot;示例&quot;">​</a></h3><ul><li><code>args</code> 的使用:</li></ul><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;setu&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;count&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">int</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">shortcut</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;涩图(\\d+)张&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, {</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;args&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#1976D2;--shiki-dark:#D19A66;">{0}</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]})</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># &#39;Alconna::setu 的快捷指令: &quot;涩图(\\\\d+)张&quot; 添加成功&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;涩图3张&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">query</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;count&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><code>command</code> 的使用:</li></ul><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;eval&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;content&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">shortcut</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;echo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, {</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;command&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;eval print(</span><span style="--shiki-light:#22863A;--shiki-dark:#56B6C2;">\\\\</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&#39;{*}</span><span style="--shiki-light:#22863A;--shiki-dark:#56B6C2;">\\\\</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&#39;)&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># &#39;Alconna::eval 的快捷指令: &quot;echo&quot; 添加成功&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">shortcut</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;echo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">delete</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 删除快捷指令</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># &#39;Alconna::eval 的快捷指令: &quot;echo&quot; 删除成功&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">@alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">bind</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 绑定一个命令执行器, 若匹配成功则会传入参数, 自动执行命令执行器</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> cb</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#FF9800;--shiki-light-font-style:inherit;--shiki-dark:#D19A66;--shiki-dark-font-style:italic;">content</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;"> str</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#56B6C2;">    eval</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(content, {}, {})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&#39;eval print(</span><span style="--shiki-light:#22863A;--shiki-dark:#56B6C2;">\\\\</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;hello world</span><span style="--shiki-light:#22863A;--shiki-dark:#56B6C2;">\\\\</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;)&#39;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># hello world</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;echo hello world!&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># hello world!</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="半自动补全" tabindex="-1">半自动补全 <a class="header-anchor" href="#半自动补全" aria-label="Permalink to &quot;半自动补全&quot;">​</a></h2><p>半自动补全为用户提供了推荐后续输入的功能。</p><p>补全默认通过 <code>--comp</code> 或 <code>-cp</code> 或 <code>?</code> 触发：（命名空间配置可修改名称）</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Option</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;abc&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">int</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">])</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;bar&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test --comp&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><details class="details custom-block"><summary>输出</summary><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>以下是建议的输入：</span></span>
<span class="line"><span>* &lt;abc: int&gt;</span></span>
<span class="line"><span>* --help</span></span>
<span class="line"><span>* -h</span></span>
<span class="line"><span>* -sct</span></span>
<span class="line"><span>* --shortcut</span></span>
<span class="line"><span>* foo</span></span>
<span class="line"><span>* bar</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></details><h3 id="补全会话" tabindex="-1">补全会话 <a class="header-anchor" href="#补全会话" aria-label="Permalink to &quot;补全会话&quot;">​</a></h3><p>补全会话基于半自动补全，提供了交互操作补全的接口</p><p>补全会话通过创建 <code>CompSession</code> 并进入上下文触发：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> CompSession</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;abc&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">int</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">])</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Option</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;bar&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">with</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> CompSession</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(alc)</span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;"> as</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> comp</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">    alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> comp</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">available</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#56B6C2;">    print</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;current completion:&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, comp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">current</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#56B6C2;">    print</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;next completion:&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, comp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">tab</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">())</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">    with</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> comp</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">        res </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> comp</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">enter</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">([</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;1&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">])</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">assert</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> res</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">matched</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="duplication" tabindex="-1">Duplication <a class="header-anchor" href="#duplication" aria-label="Permalink to &quot;Duplication&quot;">​</a></h2><p><strong>Duplication</strong> 用来提供更好的自动补全，类似于 <strong>ArgParse</strong> 的 <strong>Namespace</strong>，经测试表现良好（好耶）。</p><p>普通情况下使用，需要利用到 <strong>ArgsStub</strong>、<strong>OptionStub</strong> 和 <strong>SubcommandStub</strong> 三个部分，</p><p>以pip为例，其对应的 Duplication 应如下构造：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> OptionResult</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Duplication</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> SubcommandStub</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> MyDup</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;">Duplication</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">    verbose</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> OptionResult</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">    install</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> SubcommandStub  </span><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 选项与子命令对应的stub的变量名必须与其名字相同</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>并在解析时传入 Duplication：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">result </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;pip -v install ...&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">duplication</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">MyDup)</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">&gt;&gt;&gt;</span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;"> type</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(result)</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> MyDup</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Duplication</strong> 也可以如 <strong>Namespace</strong> 一样直接标明参数名称和类型：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> typing </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Optional</span></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Duplication</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> MyDup</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;">Duplication</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">    package</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;"> str</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#E06C75;">    file</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Optional</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#1976D2;--shiki-dark:#D19A66;"> None</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">    url</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Optional</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">str</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">]</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#1976D2;--shiki-dark:#D19A66;"> None</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="使用模糊匹配" tabindex="-1">使用模糊匹配 <a class="header-anchor" href="#使用模糊匹配" aria-label="Permalink to &quot;使用模糊匹配&quot;">​</a></h2><p>模糊匹配通过在 Alconna 中设置其 CommandMeta 开启。</p><p>模糊匹配会应用在任意需要进行名称判断的地方，如<strong>命令名称</strong>，<strong>选项名称</strong>和<strong>参数名称</strong>（如指定需要传入参数名称）。</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> CommandMeta</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test_fuzzy&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">meta</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">CommandMeta</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">fuzzy_match</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#D19A66;">True</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test_fuzy&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># output: test_fuzy is not matched. Do you mean &quot;test_fuzzy&quot;?</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="上下文插值" tabindex="-1">上下文插值 <a class="header-anchor" href="#上下文插值" aria-label="Permalink to &quot;上下文插值&quot;">​</a></h2><p>当 <code>context_style</code> 条目被设置后，传入的命令中符合上下文插值的字段会被自动替换成当前上下文中的信息。</p><p>上下文可以在 <code>parse</code> 中传入：</p><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes min-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> arclet</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alconna </span><span style="--shiki-light:#D32F2F;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> Args</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;"> CommandMeta</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc </span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Alconna</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, Args[</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;foo&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#1976D2;--shiki-dark:#56B6C2;">int</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">], </span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">meta</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">CommandMeta</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#212121;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">context_style</span><span style="--shiki-light:#D32F2F;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;parentheses&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#ABB2BF;">alc</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">parse</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;test $(bar)&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">, {</span><span style="--shiki-light:#22863A;--shiki-dark:#98C379;">&quot;bar&quot;</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#1976D2;--shiki-dark:#D19A66;">123</span><span style="--shiki-light:#212121;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># {&quot;foo&quot;: 123}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>context_style 的值分两种：</p><ul><li><code>&quot;bracket&quot;</code>: 插值格式为 <code>{...}</code>，例如 <code>{foo}</code></li><li><code>&quot;parentheses&quot;</code>: 插值格式为 <code>$(...)</code>，例如 <code>$(bar)</code></li></ul><h2 id="自定义语言文件" tabindex="-1">自定义语言文件 <a class="header-anchor" href="#自定义语言文件" aria-label="Permalink to &quot;自定义语言文件&quot;">​</a></h2><p>Alconna 的 i18n 支持使用了 <a href="https://github.com/ArcletProject/Tarina/blob/main/src/tarina/lang" target="_blank" rel="noreferrer"><code>Tarina.lang</code></a></p><p>其语言文件配置位于 <a href="https://github.com/ArcletProject/Alconna/tree/dev/src/arclet/alconna/i18n" target="_blank" rel="noreferrer"><code>arclet.alconna.i18n</code></a> 下</p><p>您可以通过 <code>tarina.lang.select</code> 切换语言配置，也可以通过 <code>tarina.lang.set</code> 对单一文本进行修改。</p><h2 id="参考链接" tabindex="-1">参考链接 <a class="header-anchor" href="#参考链接" aria-label="Permalink to &quot;参考链接&quot;">​</a></h2><p>QQ 交流群: <a href="https://jq.qq.com/?_wv=1027&amp;k=PUPOnCSH" target="_blank" rel="noreferrer">🔗链接</a></p><p>要了解如何使用 Alconna-Graia, 参考 <a href="https://graiax.cn/guide/message_parser/alconna.html" target="_blank" rel="noreferrer">消息链匹配/Alconna</a></p><p>要了解如何使用 nonebot-plugin-alconna, 参考 <a href="https://nonebot.dev/docs/best-practice/alconna/" target="_blank" rel="noreferrer">nonebot-plugin-alconna 文档</a></p>`,162)]))}const c=i(t,[["render",p]]);export{B as __pageData,c as default};
